(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[7],{

/***/ "./node_modules/css-loader/dist/cjs.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/stylus-loader/index.js!./node_modules/vue-loader/lib/index.js?!./node_modules/vue-svg-inline-loader/dist/index.min.js!./src/client/app/common/views/components/visibility-chooser.vue?vue&type=style&index=0&id=38d69d7d&lang=stylus&scoped=true&":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--1-oneOf-1-2!./node_modules/stylus-loader!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/vue-svg-inline-loader/dist/index.min.js!./src/client/app/common/views/components/visibility-chooser.vue?vue&type=style&index=0&id=38d69d7d&lang=stylus&scoped=true& ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../../../../../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.i, ".gqyayizv[data-v-38d69d7d]{position:static}.gqyayizv>.backdrop[data-v-38d69d7d]{position:fixed;top:0;left:0;z-index:10000;width:100%;height:100%;background:var(--modalBackdrop);opacity:0}.gqyayizv>.popover[data-v-38d69d7d]{position:absolute;z-index:10001;width:240px;padding:8px 0;background:var(--popupBg);border-radius:4px;box-shadow:0 3px 12px rgba(27,31,35,.15);transform:scale(.5);opacity:0}.gqyayizv>.popover[data-v-38d69d7d]:not(.isMobile){margin-top:10px;transform-origin:center -10px}.gqyayizv>.popover[data-v-38d69d7d]:not(.isMobile):before{content:\"\";display:block;position:absolute;top:-20px;left:calc(50% - 10px);border:10px solid transparent;border-bottom:10px solid var(--popupBg)}.gqyayizv>.popover>div[data-v-38d69d7d]{display:flex;padding:8px 14px;font-size:12px;color:var(--popupFg);cursor:pointer}.gqyayizv>.popover>div[data-v-38d69d7d]:hover{background:var(--faceClearButtonHover)}.gqyayizv>.popover>div[data-v-38d69d7d]:active{background:var(--faceClearButtonActive)}.gqyayizv>.popover>div.active[data-v-38d69d7d]{color:var(--primaryForeground);background:var(--primary)}.gqyayizv>.popover>div>*[data-v-38d69d7d]{user-select:none;pointer-events:none}.gqyayizv>.popover>div[data-v-38d69d7d]>:first-child{display:flex;justify-content:center;align-items:center;margin-right:10px;width:16px}.gqyayizv>.popover>div[data-v-38d69d7d]>:last-child{flex:1 1 auto}.gqyayizv>.popover>div>:last-child>span[data-v-38d69d7d]:first-child{display:block;font-weight:700}.gqyayizv>.popover>div>:last-child>span[data-v-38d69d7d]:last-child:not(:first-child){opacity:.6}", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/stylus-loader/index.js!./node_modules/vue-loader/lib/index.js?!./node_modules/vue-svg-inline-loader/dist/index.min.js!./src/client/app/desktop/views/components/post-form.vue?vue&type=style&index=0&id=17f78756&lang=stylus&scoped=true&":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--1-oneOf-1-2!./node_modules/stylus-loader!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/vue-svg-inline-loader/dist/index.min.js!./src/client/app/desktop/views/components/post-form.vue?vue&type=style&index=0&id=17f78756&lang=stylus&scoped=true& ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../../../../../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.i, ".gjisdzwh[data-v-17f78756]{display:block;padding:16px;background:var(--desktopPostFormBg);overflow:hidden}.gjisdzwh[data-v-17f78756]:after{content:\"\";display:block;clear:both}.gjisdzwh>.content>.textarea>textarea[data-v-17f78756],.gjisdzwh>.content>input[data-v-17f78756]{display:block;width:100%;font-size:16px;color:var(--desktopPostFormTextareaFg);background:var(--desktopPostFormTextareaBg);outline:none;border:1px solid var(--primaryAlpha01);border-radius:4px;transition:border-color .2s ease;padding:12px 30px 12px 12px}.gjisdzwh>.content>.textarea>textarea[data-v-17f78756]:hover,.gjisdzwh>.content>input[data-v-17f78756]:hover{border-color:var(--primaryAlpha02);transition:border-color .1s ease}.gjisdzwh>.content>.textarea>textarea[data-v-17f78756]:focus,.gjisdzwh>.content>input[data-v-17f78756]:focus{border-color:var(--primaryAlpha05);transition:border-color 0s ease}.gjisdzwh>.content>.textarea>textarea[data-v-17f78756]:disabled,.gjisdzwh>.content>input[data-v-17f78756]:disabled{opacity:.5}.gjisdzwh>.content>.textarea>textarea[data-v-17f78756]::-webkit-input-placeholder,.gjisdzwh>.content>input[data-v-17f78756]::-webkit-input-placeholder{color:var(--primaryAlpha03)}.gjisdzwh>.content>input[data-v-17f78756]{margin-bottom:8px}.gjisdzwh>.content>.textarea>.emoji[data-v-17f78756]{position:absolute;top:0;right:0;padding:10px;font-size:18px;color:var(--text);opacity:.5}.gjisdzwh>.content>.textarea>.emoji[data-v-17f78756]:hover{color:var(--textHighlighted);opacity:1}.gjisdzwh>.content>.textarea>.emoji[data-v-17f78756]:active{color:var(--primary);opacity:1}.gjisdzwh>.content>.textarea>textarea[data-v-17f78756]{margin:0;max-width:100%;min-width:100%;min-height:84px}.gjisdzwh>.content>.textarea>textarea:hover+*+*[data-v-17f78756],.gjisdzwh>.content>.textarea>textarea:hover+*+*+*[data-v-17f78756]{border-color:var(--primaryAlpha02);transition:border-color .1s ease}.gjisdzwh>.content>.textarea>textarea:focus+*+*[data-v-17f78756],.gjisdzwh>.content>.textarea>textarea:focus+*+*+*[data-v-17f78756]{border-color:var(--primaryAlpha05);transition:border-color 0s ease}.gjisdzwh>.content>.textarea>textarea:focus+.emoji[data-v-17f78756]{opacity:.7}.gjisdzwh>.content>.textarea>textarea.with[data-v-17f78756]{border-bottom:1px solid var(--primaryAlpha01)!important;border-radius:4px 4px 0 0}.gjisdzwh>.content>.textarea>.files[data-v-17f78756]{margin:0;padding:0;background:var(--desktopPostFormTextareaBg);border:1px solid var(--primaryAlpha01);border-top:none;border-radius:0 0 4px 4px;transition:border-color .3s ease}.gjisdzwh>.content>.textarea>.files.with[data-v-17f78756]{border-bottom:1px solid var(--primaryAlpha01)!important;border-radius:0}.gjisdzwh>.content>.textarea>.poll-editor[data-v-17f78756]{background:var(--desktopPostFormTextareaBg);border:1px solid var(--primaryAlpha01);border-top:none;border-radius:0 0 4px 4px;transition:border-color .3s ease}.gjisdzwh>.content>.hashtags[data-v-17f78756]{margin:0 0 8px;overflow:hidden;white-space:nowrap;font-size:14px}.gjisdzwh>.content>.hashtags>b[data-v-17f78756]{color:var(--primary)}.gjisdzwh>.content>.hashtags>*[data-v-17f78756]{margin-right:8px;white-space:nowrap}.gjisdzwh>.content>.with-quote[data-v-17f78756]{margin:0 0 8px;color:var(--primary)}.gjisdzwh>.content>.with-quote>button[data-v-17f78756]{padding:4px 8px;color:var(--primaryAlpha04)}.gjisdzwh>.content>.with-quote>button[data-v-17f78756]:hover{color:var(--primaryAlpha06)}.gjisdzwh>.content>.with-quote>button[data-v-17f78756]:active{color:var(--primaryDarken30)}.gjisdzwh>.content>.to-specified[data-v-17f78756]{margin:0 0 8px;color:var(--primary)}.gjisdzwh>.content>.to-specified>.visibleUsers[data-v-17f78756]{display:inline;top:-1px;font-size:14px}.gjisdzwh>.content>.to-specified>.visibleUsers>span[data-v-17f78756]{margin-left:14px}.gjisdzwh>.content>.to-specified>.visibleUsers>span>button[data-v-17f78756]{padding:4px 8px;color:var(--primaryAlpha04)}.gjisdzwh>.content>.to-specified>.visibleUsers>span>button[data-v-17f78756]:hover{color:var(--primaryAlpha06)}.gjisdzwh>.content>.to-specified>.visibleUsers>span>button[data-v-17f78756]:active{color:var(--primaryDarken30)}.gjisdzwh>.content>.local-only[data-v-17f78756]{margin:0 0 8px;color:var(--primary)}.gjisdzwh>.mk-uploader[data-v-17f78756]{margin:8px 0 0;padding:8px;border:1px solid var(--primaryAlpha02);border-radius:4px}.gjisdzwh input[type=file][data-v-17f78756]{display:none}.gjisdzwh .submit[data-v-17f78756]{right:16px;width:110px;height:40px}.gjisdzwh .submit[data-v-17f78756],.gjisdzwh>.text-count[data-v-17f78756]{display:block;position:absolute;bottom:16px}.gjisdzwh>.text-count[data-v-17f78756]{pointer-events:none;right:138px;margin:0;line-height:40px;color:var(--primaryAlpha05)}.gjisdzwh>.text-count.over[data-v-17f78756]{color:#ec3828}.gjisdzwh>.cw[data-v-17f78756],.gjisdzwh>.drive[data-v-17f78756],.gjisdzwh>.geo[data-v-17f78756],.gjisdzwh>.kao[data-v-17f78756],.gjisdzwh>.poll[data-v-17f78756],.gjisdzwh>.upload[data-v-17f78756],.gjisdzwh>.visibility[data-v-17f78756]{display:inline-block;cursor:pointer;padding:0;margin:8px 4px 0 0;width:40px;height:40px;font-size:1em;color:var(--desktopPostFormTransparentButtonFg);background:transparent;outline:none;border:1px solid transparent;border-radius:4px}.gjisdzwh>.cw[data-v-17f78756]:hover,.gjisdzwh>.drive[data-v-17f78756]:hover,.gjisdzwh>.geo[data-v-17f78756]:hover,.gjisdzwh>.kao[data-v-17f78756]:hover,.gjisdzwh>.poll[data-v-17f78756]:hover,.gjisdzwh>.upload[data-v-17f78756]:hover,.gjisdzwh>.visibility[data-v-17f78756]:hover{background:transparent;border-color:var(--primaryAlpha03)}.gjisdzwh>.cw[data-v-17f78756]:active,.gjisdzwh>.drive[data-v-17f78756]:active,.gjisdzwh>.geo[data-v-17f78756]:active,.gjisdzwh>.kao[data-v-17f78756]:active,.gjisdzwh>.poll[data-v-17f78756]:active,.gjisdzwh>.upload[data-v-17f78756]:active,.gjisdzwh>.visibility[data-v-17f78756]:active{color:var(--primaryAlpha06);background:linear-gradient(180deg,var(--desktopPostFormTransparentButtonActiveGradientStart) 0,var(--desktopPostFormTransparentButtonActiveGradientEnd));border-color:var(--primaryAlpha05);box-shadow:inset 0 2px 4px rgba(0,0,0,.15)}.gjisdzwh>.cw[data-v-17f78756]:focus:after,.gjisdzwh>.drive[data-v-17f78756]:focus:after,.gjisdzwh>.geo[data-v-17f78756]:focus:after,.gjisdzwh>.kao[data-v-17f78756]:focus:after,.gjisdzwh>.poll[data-v-17f78756]:focus:after,.gjisdzwh>.upload[data-v-17f78756]:focus:after,.gjisdzwh>.visibility[data-v-17f78756]:focus:after{content:\"\";pointer-events:none;position:absolute;top:-5px;right:-5px;bottom:-5px;left:-5px;border:2px solid var(--primaryAlpha03);border-radius:8px}.gjisdzwh>.dropzone[data-v-17f78756]{position:absolute;left:0;top:0;width:100%;height:100%;border:2px dashed var(--primaryAlpha05);pointer-events:none}", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ "./node_modules/vue-style-loader/index.js!./node_modules/css-loader/dist/cjs.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/stylus-loader/index.js!./node_modules/vue-loader/lib/index.js?!./node_modules/vue-svg-inline-loader/dist/index.min.js!./src/client/app/common/views/components/visibility-chooser.vue?vue&type=style&index=0&id=38d69d7d&lang=stylus&scoped=true&":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/vue-style-loader!./node_modules/css-loader/dist/cjs.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--1-oneOf-1-2!./node_modules/stylus-loader!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/vue-svg-inline-loader/dist/index.min.js!./src/client/app/common/views/components/visibility-chooser.vue?vue&type=style&index=0&id=38d69d7d&lang=stylus&scoped=true& ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(/*! !../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src??ref--1-oneOf-1-2!../../../../../../node_modules/stylus-loader!../../../../../../node_modules/vue-loader/lib??vue-loader-options!../../../../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./visibility-chooser.vue?vue&type=style&index=0&id=38d69d7d&lang=stylus&scoped=true& */ "./node_modules/css-loader/dist/cjs.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/stylus-loader/index.js!./node_modules/vue-loader/lib/index.js?!./node_modules/vue-svg-inline-loader/dist/index.min.js!./src/client/app/common/views/components/visibility-chooser.vue?vue&type=style&index=0&id=38d69d7d&lang=stylus&scoped=true&");
if(typeof content === 'string') content = [[module.i, content, '']];
if(content.locals) module.exports = content.locals;
// add the styles to the DOM
var add = __webpack_require__(/*! ../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js */ "./node_modules/vue-style-loader/lib/addStylesClient.js").default
var update = add("36b28baa", content, false, {});
// Hot Module Replacement
if(false) {}

/***/ }),

/***/ "./node_modules/vue-style-loader/index.js!./node_modules/css-loader/dist/cjs.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/stylus-loader/index.js!./node_modules/vue-loader/lib/index.js?!./node_modules/vue-svg-inline-loader/dist/index.min.js!./src/client/app/desktop/views/components/post-form.vue?vue&type=style&index=0&id=17f78756&lang=stylus&scoped=true&":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/vue-style-loader!./node_modules/css-loader/dist/cjs.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--1-oneOf-1-2!./node_modules/stylus-loader!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/vue-svg-inline-loader/dist/index.min.js!./src/client/app/desktop/views/components/post-form.vue?vue&type=style&index=0&id=17f78756&lang=stylus&scoped=true& ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(/*! !../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src??ref--1-oneOf-1-2!../../../../../../node_modules/stylus-loader!../../../../../../node_modules/vue-loader/lib??vue-loader-options!../../../../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./post-form.vue?vue&type=style&index=0&id=17f78756&lang=stylus&scoped=true& */ "./node_modules/css-loader/dist/cjs.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/stylus-loader/index.js!./node_modules/vue-loader/lib/index.js?!./node_modules/vue-svg-inline-loader/dist/index.min.js!./src/client/app/desktop/views/components/post-form.vue?vue&type=style&index=0&id=17f78756&lang=stylus&scoped=true&");
if(typeof content === 'string') content = [[module.i, content, '']];
if(content.locals) module.exports = content.locals;
// add the styles to the DOM
var add = __webpack_require__(/*! ../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js */ "./node_modules/vue-style-loader/lib/addStylesClient.js").default
var update = add("01a022f2", content, false, {});
// Hot Module Replacement
if(false) {}

/***/ }),

/***/ "./src/client/app/common/views/components/visibility-chooser.vue?vue&type=style&index=0&id=38d69d7d&lang=stylus&scoped=true&":
/*!***********************************************************************************************************************************!*\
  !*** ./src/client/app/common/views/components/visibility-chooser.vue?vue&type=style&index=0&id=38d69d7d&lang=stylus&scoped=true& ***!
  \***********************************************************************************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module exports are unknown */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_vue_style_loader_index_js_node_modules_css_loader_dist_cjs_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_1_oneOf_1_2_node_modules_stylus_loader_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_vue_svg_inline_loader_dist_index_min_js_visibility_chooser_vue_vue_type_style_index_0_id_38d69d7d_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../../../node_modules/vue-style-loader!../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src??ref--1-oneOf-1-2!../../../../../../node_modules/stylus-loader!../../../../../../node_modules/vue-loader/lib??vue-loader-options!../../../../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./visibility-chooser.vue?vue&type=style&index=0&id=38d69d7d&lang=stylus&scoped=true& */ "./node_modules/vue-style-loader/index.js!./node_modules/css-loader/dist/cjs.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/stylus-loader/index.js!./node_modules/vue-loader/lib/index.js?!./node_modules/vue-svg-inline-loader/dist/index.min.js!./src/client/app/common/views/components/visibility-chooser.vue?vue&type=style&index=0&id=38d69d7d&lang=stylus&scoped=true&");
/* harmony import */ var _node_modules_vue_style_loader_index_js_node_modules_css_loader_dist_cjs_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_1_oneOf_1_2_node_modules_stylus_loader_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_vue_svg_inline_loader_dist_index_min_js_visibility_chooser_vue_vue_type_style_index_0_id_38d69d7d_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_vue_style_loader_index_js_node_modules_css_loader_dist_cjs_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_1_oneOf_1_2_node_modules_stylus_loader_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_vue_svg_inline_loader_dist_index_min_js_visibility_chooser_vue_vue_type_style_index_0_id_38d69d7d_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _node_modules_vue_style_loader_index_js_node_modules_css_loader_dist_cjs_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_1_oneOf_1_2_node_modules_stylus_loader_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_vue_svg_inline_loader_dist_index_min_js_visibility_chooser_vue_vue_type_style_index_0_id_38d69d7d_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _node_modules_vue_style_loader_index_js_node_modules_css_loader_dist_cjs_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_1_oneOf_1_2_node_modules_stylus_loader_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_vue_svg_inline_loader_dist_index_min_js_visibility_chooser_vue_vue_type_style_index_0_id_38d69d7d_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_node_modules_vue_style_loader_index_js_node_modules_css_loader_dist_cjs_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_1_oneOf_1_2_node_modules_stylus_loader_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_vue_svg_inline_loader_dist_index_min_js_visibility_chooser_vue_vue_type_style_index_0_id_38d69d7d_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ "./src/client/app/desktop/views/components/post-form.vue":
/*!****************************************************************************!*\
  !*** ./src/client/app/desktop/views/components/post-form.vue + 12 modules ***!
  \****************************************************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/animejs/lib/anime.es.js */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/insert-text-at-cursor/dist/index.esm.js */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/node-libs-browser/node_modules/punycode/punycode.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/stringz/dist/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./src/client/app/config.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/client/app/i18n.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/mfm/parse.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/misc/format-time-string.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/prelude/array.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/prelude/tree.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/vue-loader/lib/runtime/componentNormalizer.js */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/vue/dist/vue.runtime.esm.js (<- Module uses injected variables (global, setImmediate)) */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);

// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/vue-svg-inline-loader/dist/index.min.js!./src/client/app/desktop/views/components/post-form.vue?vue&type=template&id=17f78756&scoped=true&
var render = function() {
  var _vm = this
  var _h = _vm.$createElement
  var _c = _vm._self._c || _h
  return _c(
    "div",
    {
      staticClass: "gjisdzwh",
      on: {
        dragover: function($event) {
          $event.stopPropagation()
          return _vm.onDragover($event)
        },
        dragenter: _vm.onDragenter,
        dragleave: _vm.onDragleave,
        drop: function($event) {
          $event.stopPropagation()
          return _vm.onDrop($event)
        }
      }
    },
    [
      _c("div", { staticClass: "content" }, [
        _vm.recentHashtags.length > 0 &&
        _vm.$store.state.settings.suggestRecentHashtags
          ? _c(
              "div",
              { staticClass: "hashtags" },
              [
                _c("b", [
                  _vm._v(_vm._s(_vm.$t("@.post-form.recent-tags")) + ":")
                ]),
                _vm._l(_vm.recentHashtags.slice(0, 5), function(tag) {
                  return _c(
                    "a",
                    {
                      attrs: { title: _vm.$t("@.post-form.click-to-tagging") },
                      on: {
                        click: function($event) {
                          return _vm.addTag(tag)
                        }
                      }
                    },
                    [_vm._v("#" + _vm._s(tag))]
                  )
                })
              ],
              2
            )
          : _vm._e(),
        _vm.quoteId
          ? _c(
              "div",
              { staticClass: "with-quote" },
              [
                _c("fa", { attrs: { icon: "quote-left" } }),
                _vm._v(" " + _vm._s(_vm.$t("@.post-form.quote-attached"))),
                _c(
                  "button",
                  {
                    on: {
                      click: function($event) {
                        _vm.quoteId = null
                      }
                    }
                  },
                  [_c("fa", { attrs: { icon: "times" } })],
                  1
                )
              ],
              1
            )
          : _vm._e(),
        _vm.visibility === "specified"
          ? _c(
              "div",
              { staticClass: "to-specified" },
              [
                _c("fa", { attrs: { icon: "envelope" } }),
                _vm._v(
                  " " +
                    _vm._s(_vm.$t("@.post-form.specified-recipient")) +
                    "\n\t\t\t"
                ),
                _c(
                  "div",
                  { staticClass: "visibleUsers" },
                  [
                    _vm._l(_vm.visibleUsers, function(u) {
                      return _c(
                        "span",
                        [
                          _c("mk-user-name", { attrs: { user: u } }),
                          _c(
                            "button",
                            {
                              on: {
                                click: function($event) {
                                  return _vm.removeVisibleUser(u)
                                }
                              }
                            },
                            [_c("fa", { attrs: { icon: "times" } })],
                            1
                          )
                        ],
                        1
                      )
                    }),
                    _c("button", { on: { click: _vm.addVisibleUser } }, [
                      _vm._v(_vm._s(_vm.$t("@.post-form.add-visible-user")))
                    ])
                  ],
                  2
                )
              ],
              1
            )
          : _vm._e(),
        _vm.localOnly === true
          ? _c(
              "div",
              { staticClass: "local-only" },
              [
                _c("fa", { attrs: { icon: "heart" } }),
                _vm._v(" " + _vm._s(_vm.$t("@.post-form.local-only-message")))
              ],
              1
            )
          : _vm._e(),
        _c("input", {
          directives: [
            {
              name: "show",
              rawName: "v-show",
              value: _vm.useCw,
              expression: "useCw"
            },
            {
              name: "model",
              rawName: "v-model",
              value: _vm.cw,
              expression: "cw"
            },
            {
              name: "autocomplete",
              rawName: "v-autocomplete",
              value: { model: "cw" },
              expression: "{ model: 'cw' }"
            }
          ],
          ref: "cw",
          attrs: { placeholder: _vm.$t("@.post-form.cw-placeholder") },
          domProps: { value: _vm.cw },
          on: {
            input: function($event) {
              if ($event.target.composing) {
                return
              }
              _vm.cw = $event.target.value
            }
          }
        }),
        _c(
          "div",
          { staticClass: "textarea" },
          [
            _c("textarea", {
              directives: [
                {
                  name: "model",
                  rawName: "v-model",
                  value: _vm.text,
                  expression: "text"
                },
                {
                  name: "autocomplete",
                  rawName: "v-autocomplete",
                  value: { model: "text" },
                  expression: "{ model: 'text' }"
                }
              ],
              ref: "text",
              class: { with: _vm.files.length != 0 || _vm.poll },
              attrs: { disabled: _vm.posting, placeholder: _vm.placeholder },
              domProps: { value: _vm.text },
              on: {
                keydown: _vm.onKeydown,
                paste: _vm.onPaste,
                input: function($event) {
                  if ($event.target.composing) {
                    return
                  }
                  _vm.text = $event.target.value
                }
              }
            }),
            _c(
              "button",
              { ref: "emoji", staticClass: "emoji", on: { click: _vm.emoji } },
              [_c("fa", { attrs: { icon: ["far", "laugh"] } })],
              1
            ),
            _c("x-post-form-attaches", {
              staticClass: "files",
              class: { with: _vm.poll },
              attrs: { files: _vm.files }
            }),
            _vm.poll
              ? _c("x-poll-editor", {
                  ref: "poll",
                  staticClass: "poll-editor",
                  on: {
                    destroyed: function($event) {
                      _vm.poll = false
                    },
                    updated: function($event) {
                      return _vm.onPollUpdate()
                    }
                  }
                })
              : _vm._e()
          ],
          1
        )
      ]),
      _c("mk-uploader", {
        ref: "uploader",
        on: { uploaded: _vm.attachMedia, change: _vm.onChangeUploadings }
      }),
      _c(
        "button",
        {
          staticClass: "upload",
          attrs: { title: _vm.$t("@.post-form.attach-media-from-local") },
          on: { click: _vm.chooseFile }
        },
        [_c("fa", { attrs: { icon: "upload" } })],
        1
      ),
      _c(
        "button",
        {
          staticClass: "drive",
          attrs: { title: _vm.$t("@.post-form.attach-media-from-drive") },
          on: { click: _vm.chooseFileFromDrive }
        },
        [_c("fa", { attrs: { icon: "cloud" } })],
        1
      ),
      _c(
        "button",
        {
          staticClass: "kao",
          attrs: { title: _vm.$t("@.post-form.insert-a-kao") },
          on: { click: _vm.kao }
        },
        [_c("fa", { attrs: { icon: ["far", "smile"] } })],
        1
      ),
      _c(
        "button",
        {
          staticClass: "poll",
          attrs: { title: _vm.$t("@.post-form.create-poll") },
          on: {
            click: function($event) {
              _vm.poll = !_vm.poll
            }
          }
        },
        [_c("fa", { attrs: { icon: "chart-pie" } })],
        1
      ),
      _c(
        "button",
        {
          staticClass: "cw",
          attrs: { title: _vm.$t("@.post-form.hide-contents") },
          on: {
            click: function($event) {
              _vm.useCw = !_vm.useCw
            }
          }
        },
        [_c("fa", { attrs: { icon: ["far", "eye-slash"] } })],
        1
      ),
      _c(
        "button",
        {
          staticClass: "geo",
          attrs: { title: _vm.$t("@.post-form.attach-location-information") },
          on: {
            click: function($event) {
              _vm.geo ? _vm.removeGeo() : _vm.setGeo()
            }
          }
        },
        [_c("fa", { attrs: { icon: "map-marker-alt" } })],
        1
      ),
      _c(
        "button",
        {
          ref: "visibilityButton",
          staticClass: "visibility",
          attrs: { title: _vm.$t("@.post-form.visibility") },
          on: { click: _vm.setVisibility }
        },
        [
          _vm.visibility === "public"
            ? _c("span", [_c("fa", { attrs: { icon: "globe" } })], 1)
            : _vm._e(),
          _vm.visibility === "home"
            ? _c("span", [_c("fa", { attrs: { icon: "home" } })], 1)
            : _vm._e(),
          _vm.visibility === "followers"
            ? _c("span", [_c("fa", { attrs: { icon: "unlock" } })], 1)
            : _vm._e(),
          _vm.visibility === "specified"
            ? _c("span", [_c("fa", { attrs: { icon: "envelope" } })], 1)
            : _vm._e()
        ]
      ),
      _c(
        "p",
        {
          staticClass: "text-count",
          class: { over: _vm.trimmedLength(_vm.text) > _vm.maxNoteTextLength }
        },
        [_vm._v(_vm._s(_vm.maxNoteTextLength - _vm.trimmedLength(_vm.text)))]
      ),
      _c(
        "ui-button",
        {
          staticClass: "submit",
          attrs: { primary: "", wait: _vm.posting, disabled: !_vm.canPost },
          on: { click: _vm.post }
        },
        [
          _vm._v(
            "\n\t\t" +
              _vm._s(
                _vm.posting ? _vm.$t("@.post-form.posting") : _vm.submitText
              )
          ),
          _vm.posting ? _c("mk-ellipsis") : _vm._e()
        ],
        1
      ),
      _c("input", {
        ref: "file",
        attrs: { type: "file", multiple: "multiple", tabindex: "-1" },
        on: { change: _vm.onChangeFile }
      }),
      _vm.draghover ? _c("div", { staticClass: "dropzone" }) : _vm._e()
    ],
    1
  )
}
var staticRenderFns = []
render._withStripped = true


// CONCATENATED MODULE: ./src/client/app/desktop/views/components/post-form.vue?vue&type=template&id=17f78756&scoped=true&

// EXTERNAL MODULE: ./node_modules/vue/dist/vue.runtime.esm.js
var vue_runtime_esm = __webpack_require__("./node_modules/vue/dist/vue.runtime.esm.js");

// EXTERNAL MODULE: ./src/client/app/i18n.ts
var i18n = __webpack_require__("./src/client/app/i18n.ts");

// EXTERNAL MODULE: ./node_modules/insert-text-at-cursor/dist/index.esm.js
var index_esm = __webpack_require__("./node_modules/insert-text-at-cursor/dist/index.esm.js");

// EXTERNAL MODULE: ./node_modules/stringz/dist/index.js
var dist = __webpack_require__("./node_modules/stringz/dist/index.js");

// EXTERNAL MODULE: ./node_modules/node-libs-browser/node_modules/punycode/punycode.js
var punycode = __webpack_require__("./node_modules/node-libs-browser/node_modules/punycode/punycode.js");

// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/vue-svg-inline-loader/dist/index.min.js!./src/client/app/common/views/components/visibility-chooser.vue?vue&type=template&id=38d69d7d&scoped=true&
var visibility_chooservue_type_template_id_38d69d7d_scoped_true_render = function() {
  var _vm = this
  var _h = _vm.$createElement
  var _c = _vm._self._c || _h
  return _c("div", { staticClass: "gqyayizv" }, [
    _c("div", {
      ref: "backdrop",
      staticClass: "backdrop",
      on: { click: _vm.close }
    }),
    _c(
      "div",
      {
        ref: "popover",
        staticClass: "popover",
        class: { isMobile: _vm.$root.isMobile }
      },
      [
        _c(
          "div",
          {
            class: { active: _vm.v == "public" },
            on: {
              click: function($event) {
                return _vm.choose("public")
              }
            }
          },
          [
            _c("div", [_c("fa", { attrs: { icon: "globe" } })], 1),
            _c("div", [_c("span", [_vm._v(_vm._s(_vm.$t("public")))])])
          ]
        ),
        _c(
          "div",
          {
            class: { active: _vm.v == "home" },
            on: {
              click: function($event) {
                return _vm.choose("home")
              }
            }
          },
          [
            _c("div", [_c("fa", { attrs: { icon: "home" } })], 1),
            _c("div", [
              _c("span", [_vm._v(_vm._s(_vm.$t("home")))]),
              _c("span", [_vm._v(_vm._s(_vm.$t("home-desc")))])
            ])
          ]
        ),
        _c(
          "div",
          {
            class: { active: _vm.v == "followers" },
            on: {
              click: function($event) {
                return _vm.choose("followers")
              }
            }
          },
          [
            _c("div", [_c("fa", { attrs: { icon: "unlock" } })], 1),
            _c("div", [
              _c("span", [_vm._v(_vm._s(_vm.$t("followers")))]),
              _c("span", [_vm._v(_vm._s(_vm.$t("followers-desc")))])
            ])
          ]
        ),
        _c(
          "div",
          {
            class: { active: _vm.v == "specified" },
            on: {
              click: function($event) {
                return _vm.choose("specified")
              }
            }
          },
          [
            _c("div", [_c("fa", { attrs: { icon: "envelope" } })], 1),
            _c("div", [
              _c("span", [_vm._v(_vm._s(_vm.$t("specified")))]),
              _c("span", [_vm._v(_vm._s(_vm.$t("specified-desc")))])
            ])
          ]
        ),
        _c(
          "div",
          {
            class: { active: _vm.v == "local-public" },
            on: {
              click: function($event) {
                return _vm.choose("local-public")
              }
            }
          },
          [
            _c("div", [_c("fa", { attrs: { icon: "globe" } })], 1),
            _c("div", [
              _c("span", [_vm._v(_vm._s(_vm.$t("local-public")))]),
              _c("span", [_vm._v(_vm._s(_vm.$t("local-public-desc")))])
            ])
          ]
        ),
        _c(
          "div",
          {
            class: { active: _vm.v == "local-home" },
            on: {
              click: function($event) {
                return _vm.choose("local-home")
              }
            }
          },
          [
            _c("div", [_c("fa", { attrs: { icon: "home" } })], 1),
            _c("div", [_c("span", [_vm._v(_vm._s(_vm.$t("local-home")))])])
          ]
        ),
        _c(
          "div",
          {
            class: { active: _vm.v == "local-followers" },
            on: {
              click: function($event) {
                return _vm.choose("local-followers")
              }
            }
          },
          [
            _c("div", [_c("fa", { attrs: { icon: "unlock" } })], 1),
            _c("div", [_c("span", [_vm._v(_vm._s(_vm.$t("local-followers")))])])
          ]
        )
      ]
    )
  ])
}
var visibility_chooservue_type_template_id_38d69d7d_scoped_true_staticRenderFns = []
visibility_chooservue_type_template_id_38d69d7d_scoped_true_render._withStripped = true


// CONCATENATED MODULE: ./src/client/app/common/views/components/visibility-chooser.vue?vue&type=template&id=38d69d7d&scoped=true&

// EXTERNAL MODULE: ./node_modules/animejs/lib/anime.es.js
var anime_es = __webpack_require__("./node_modules/animejs/lib/anime.es.js");

// CONCATENATED MODULE: ./node_modules/ts-loader??ref--5-0!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/vue-svg-inline-loader/dist/index.min.js!./src/client/app/common/views/components/visibility-chooser.vue?vue&type=script&lang=ts&



/* harmony default export */ var visibility_chooservue_type_script_lang_ts_ = (vue_runtime_esm["default"].extend({
    i18n: Object(i18n["default"])('common/views/components/visibility-chooser.vue'),
    props: {
        source: {
            required: true
        },
        currentVisibility: {
            type: String,
            required: false
        }
    },
    data() {
        return {
            v: this.$store.state.settings.rememberNoteVisibility ? (this.$store.state.device.visibility || this.$store.state.settings.defaultNoteVisibility) : (this.currentVisibility || this.$store.state.settings.defaultNoteVisibility)
        };
    },
    mounted() {
        this.$nextTick(() => {
            const popover = this.$refs.popover;
            const rect = this.source.getBoundingClientRect();
            const width = popover.offsetWidth;
            const height = popover.offsetHeight;
            let left;
            let top;
            if (this.$root.isMobile) {
                const x = rect.left + window.pageXOffset + (this.source.offsetWidth / 2);
                const y = rect.top + window.pageYOffset + (this.source.offsetHeight / 2);
                left = (x - (width / 2));
                top = (y - (height / 2));
            }
            else {
                const x = rect.left + window.pageXOffset + (this.source.offsetWidth / 2);
                const y = rect.top + window.pageYOffset + this.source.offsetHeight;
                left = (x - (width / 2));
                top = y;
            }
            if (left + width > window.innerWidth) {
                left = window.innerWidth - width;
            }
            popover.style.left = left + 'px';
            popover.style.top = top + 'px';
            Object(anime_es["default"])({
                targets: this.$refs.backdrop,
                opacity: 1,
                duration: 100,
                easing: 'linear'
            });
            Object(anime_es["default"])({
                targets: this.$refs.popover,
                opacity: 1,
                scale: [0.5, 1],
                duration: 500
            });
        });
    },
    methods: {
        choose(visibility) {
            if (this.$store.state.settings.rememberNoteVisibility) {
                this.$store.commit('device/setVisibility', visibility);
            }
            this.$emit('chosen', visibility);
            this.destroyDom();
        },
        close() {
            this.$refs.backdrop.style.pointerEvents = 'none';
            Object(anime_es["default"])({
                targets: this.$refs.backdrop,
                opacity: 0,
                duration: 200,
                easing: 'linear'
            });
            this.$refs.popover.style.pointerEvents = 'none';
            Object(anime_es["default"])({
                targets: this.$refs.popover,
                opacity: 0,
                scale: 0.5,
                duration: 200,
                easing: 'easeInBack',
                complete: () => this.destroyDom()
            });
        }
    }
}));

// CONCATENATED MODULE: ./src/client/app/common/views/components/visibility-chooser.vue?vue&type=script&lang=ts&
 /* harmony default export */ var components_visibility_chooservue_type_script_lang_ts_ = (visibility_chooservue_type_script_lang_ts_); 
// EXTERNAL MODULE: ./src/client/app/common/views/components/visibility-chooser.vue?vue&type=style&index=0&id=38d69d7d&lang=stylus&scoped=true&
var visibility_chooservue_type_style_index_0_id_38d69d7d_lang_stylus_scoped_true_ = __webpack_require__("./src/client/app/common/views/components/visibility-chooser.vue?vue&type=style&index=0&id=38d69d7d&lang=stylus&scoped=true&");

// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js
var componentNormalizer = __webpack_require__("./node_modules/vue-loader/lib/runtime/componentNormalizer.js");

// CONCATENATED MODULE: ./src/client/app/common/views/components/visibility-chooser.vue






/* normalize component */

var component = Object(componentNormalizer["default"])(
  components_visibility_chooservue_type_script_lang_ts_,
  visibility_chooservue_type_template_id_38d69d7d_scoped_true_render,
  visibility_chooservue_type_template_id_38d69d7d_scoped_true_staticRenderFns,
  false,
  null,
  "38d69d7d",
  null
  
)

/* hot reload */
if (false) { var api; }
component.options.__file = "src/client/app/common/views/components/visibility-chooser.vue"
/* harmony default export */ var visibility_chooser = (component.exports);
// CONCATENATED MODULE: ./src/client/app/common/scripts/get-face.ts
const faces = [
    '(=^„Éª„Éª^=)',
    'v(\'œâ\')v',
    'üê°( \'-\' üê° )ÔæåÔΩ∏ÔæûÔæäÔæüÔæùÔæÅ!!!!',
    '‚úåÔ∏è(¬¥ÔΩ•_ÔΩ•`)‚úåÔ∏è',
    '(ÔΩ°>Ôπè<ÔΩ°)',
    '(Œî„Éªx„ÉªŒî)',
    '(ÔΩ∫ÔΩÄ„ÉªÔæç„Éª¬¥ÔΩπ)'
];
/* harmony default export */ var get_face = (() => faces[Math.floor(Math.random() * faces.length)]);

// EXTERNAL MODULE: ./src/mfm/parse.ts + 4 modules
var parse = __webpack_require__("./src/mfm/parse.ts");

// EXTERNAL MODULE: ./src/client/app/config.ts
var config = __webpack_require__("./src/client/app/config.ts");

// EXTERNAL MODULE: ./src/prelude/array.ts
var array = __webpack_require__("./src/prelude/array.ts");

// EXTERNAL MODULE: ./src/prelude/tree.ts
var tree = __webpack_require__("./src/prelude/tree.ts");

// CONCATENATED MODULE: ./src/misc/extract-mentions.ts
// test is located in test/extract-mentions

/* harmony default export */ var extract_mentions = (function (mfmForest) {
    // TODO: ÈáçË§á„ÇíÂâäÈô§
    const mentionNodes = Object(tree["preorderF"])(mfmForest).filter(x => x.type === 'mention');
    return mentionNodes.map(x => x.props);
});

// EXTERNAL MODULE: ./src/misc/format-time-string.ts
var format_time_string = __webpack_require__("./src/misc/format-time-string.ts");

// CONCATENATED MODULE: ./src/client/app/common/scripts/post-form.ts











/* harmony default export */ var post_form = ((opts) => ({
    i18n: Object(i18n["default"])(),
    components: {
        XPostFormAttaches: () => Promise.all(/*! import() */[__webpack_require__.e(0), __webpack_require__.e(18)]).then(__webpack_require__.bind(null, /*! ../views/components/post-form-attaches.vue */ "./src/client/app/common/views/components/post-form-attaches.vue")).then(m => m.default),
        XPollEditor: () => __webpack_require__.e(/*! import() */ 43).then(__webpack_require__.bind(null, /*! ../views/components/poll-editor.vue */ "./src/client/app/common/views/components/poll-editor.vue")).then(m => m.default)
    },
    props: {
        reply: {
            type: Object,
            required: false
        },
        renote: {
            type: Object,
            required: false
        },
        mention: {
            type: Object,
            required: false
        },
        initialText: {
            type: String,
            required: false
        },
        initialNote: {
            type: Object,
            required: false
        },
        instant: {
            type: Boolean,
            required: false,
            default: false
        }
    },
    data() {
        return {
            posting: false,
            text: '',
            files: [],
            uploadings: [],
            poll: false,
            pollChoices: [],
            pollMultiple: false,
            pollExpiration: [],
            useCw: false,
            cw: null,
            geo: null,
            visibility: 'public',
            visibleUsers: [],
            localOnly: false,
            autocomplete: null,
            draghover: false,
            quoteId: null,
            recentHashtags: JSON.parse(localStorage.getItem('hashtags') || '[]'),
            maxNoteTextLength: 1000
        };
    },
    computed: {
        draftId() {
            return this.renote
                ? `renote:${this.renote.id}`
                : this.reply
                    ? `reply:${this.reply.id}`
                    : 'note';
        },
        placeholder() {
            const xs = [
                this.$t('@.note-placeholders.a'),
                this.$t('@.note-placeholders.b'),
                this.$t('@.note-placeholders.c'),
                this.$t('@.note-placeholders.d'),
                this.$t('@.note-placeholders.e'),
                this.$t('@.note-placeholders.f')
            ];
            const x = xs[Math.floor(Math.random() * xs.length)];
            return this.renote
                ? opts.mobile ? this.$t('@.post-form.option-quote-placeholder') : this.$t('@.post-form.quote-placeholder')
                : this.reply
                    ? this.$t('@.post-form.reply-placeholder')
                    : x;
        },
        submitText() {
            return this.renote
                ? this.$t('@.post-form.renote')
                : this.reply
                    ? this.$t('@.post-form.reply')
                    : this.$t('@.post-form.submit');
        },
        canPost() {
            return !this.posting &&
                (1 <= this.text.length || 1 <= this.files.length || this.poll || this.renote) &&
                (Object(dist["length"])(this.text.trim()) <= this.maxNoteTextLength) &&
                (!this.poll || this.pollChoices.length >= 2);
        }
    },
    created() {
        this.$root.getMeta().then(meta => {
            this.maxNoteTextLength = meta.maxNoteTextLength;
        });
    },
    mounted() {
        if (this.initialText) {
            this.text = this.initialText;
        }
        if (this.mention) {
            this.text = this.mention.host ? `@${this.mention.username}@${Object(punycode["toASCII"])(this.mention.host)}` : `@${this.mention.username}`;
            this.text += ' ';
        }
        if (this.reply && this.reply.user.host != null) {
            this.text = `@${this.reply.user.username}@${Object(punycode["toASCII"])(this.reply.user.host)} `;
        }
        if (this.reply && this.reply.text != null) {
            const ast = Object(parse["parse"])(this.reply.text);
            for (const x of extract_mentions(ast)) {
                const mention = x.host ? `@${x.username}@${Object(punycode["toASCII"])(x.host)}` : `@${x.username}`;
                // Ëá™ÂàÜ„ÅØÈô§Â§ñ
                if (this.$store.state.i.username == x.username && x.host == null)
                    continue;
                if (this.$store.state.i.username == x.username && x.host == config["host"])
                    continue;
                // ÈáçË§á„ÅØÈô§Â§ñ
                if (this.text.indexOf(`${mention} `) != -1)
                    continue;
                this.text += `${mention} `;
            }
        }
        // „Éá„Éï„Ç©„É´„ÉàÂÖ¨ÈñãÁØÑÂõ≤
        this.applyVisibility(this.$store.state.settings.rememberNoteVisibility ? (this.$store.state.device.visibility || this.$store.state.settings.defaultNoteVisibility) : this.$store.state.settings.defaultNoteVisibility);
        if (this.reply && this.reply.localOnly) {
            this.localOnly = true;
        }
        // ÂÖ¨Èñã‰ª•Â§ñ„Å∏„ÅÆ„É™„Éó„É©„Ç§ÊôÇ„ÅØÂÖÉ„ÅÆÂÖ¨ÈñãÁØÑÂõ≤„ÇíÂºï„ÅçÁ∂ô„Åê
        if (this.reply && ['home', 'followers', 'specified'].includes(this.reply.visibility)) {
            this.visibility = this.reply.visibility;
            if (this.reply.visibility === 'specified') {
                this.$root.api('users/show', {
                    userIds: this.reply.visibleUserIds.filter(uid => uid !== this.$store.state.i.id && uid !== this.reply.userId)
                }).then(users => {
                    this.visibleUsers.push(...users);
                });
                if (this.reply.userId !== this.$store.state.i.id) {
                    this.$root.api('users/show', { userId: this.reply.userId }).then(user => {
                        this.visibleUsers.push(user);
                    });
                }
            }
        }
        // keep cw when reply
        if (this.$store.state.settings.keepCw && this.reply && this.reply.cw) {
            this.useCw = true;
            this.cw = this.reply.cw;
        }
        this.focus();
        this.$nextTick(() => {
            this.focus();
        });
        this.$nextTick(() => {
            // Êõ∏„Åç„Åã„Åë„ÅÆÊäïÁ®ø„ÇíÂæ©ÂÖÉ
            if (!this.instant && !this.mention) {
                const draft = JSON.parse(localStorage.getItem('drafts') || '{}')[this.draftId];
                if (draft) {
                    this.text = draft.data.text;
                    this.files = (draft.data.files || []).filter(e => e);
                    if (draft.data.poll) {
                        this.poll = true;
                        this.$nextTick(() => {
                            this.$refs.poll.set(draft.data.poll);
                        });
                    }
                    this.$emit('change-attached-files', this.files);
                }
            }
            // ÂâäÈô§„Åó„Å¶Á∑®ÈõÜ
            if (this.initialNote) {
                const init = this.initialNote;
                this.text = init.text ? init.text : '';
                this.files = init.files;
                this.cw = init.cw;
                this.useCw = init.cw != null;
                if (init.poll) {
                    this.poll = true;
                    this.$nextTick(() => {
                        this.$refs.poll.set({
                            choices: init.poll.choices.map(c => c.text),
                            multiple: init.poll.multiple
                        });
                    });
                }
                // hack ‰ΩçÁΩÆÊÉÖÂ†±ÊäïÁ®ø„ÅåÂãï„Åè„Çà„ÅÜ„Å´„Å™„Å£„Åü„ÇâÈÅ©Áî®„Åô„Çã
                this.geo = null;
                this.visibility = init.visibility;
                this.localOnly = init.localOnly;
                this.quoteId = init.renote ? init.renote.id : null;
            }
            this.$nextTick(() => this.watch());
        });
    },
    methods: {
        watch() {
            this.$watch('text', () => this.saveDraft());
            this.$watch('poll', () => this.saveDraft());
            this.$watch('files', () => this.saveDraft());
        },
        trimmedLength(text) {
            return Object(dist["length"])(text.trim());
        },
        addTag(tag) {
            Object(index_esm["default"])(this.$refs.text, ` #${tag} `);
        },
        focus() {
            this.$refs.text.focus();
        },
        chooseFile() {
            this.$refs.file.click();
        },
        chooseFileFromDrive() {
            this.$chooseDriveFile({
                multiple: true
            }).then(files => {
                for (const x of files)
                    this.attachMedia(x);
            });
        },
        attachMedia(driveFile) {
            this.files.push(driveFile);
            this.$emit('change-attached-files', this.files);
        },
        detachMedia(id) {
            this.files = this.files.filter(x => x.id != id);
            this.$emit('change-attached-files', this.files);
        },
        onChangeFile() {
            for (const x of Array.from(this.$refs.file.files))
                this.upload(x);
        },
        upload(file, name) {
            this.$refs.uploader.upload(file, this.$store.state.settings.uploadFolder, name);
        },
        onChangeUploadings(uploads) {
            this.$emit('change-uploadings', uploads);
        },
        onPollUpdate() {
            const got = this.$refs.poll.get();
            this.pollChoices = got.choices;
            this.pollMultiple = got.multiple;
            this.pollExpiration = [got.expiration, got.expiresAt || got.expiredAfter];
            this.saveDraft();
        },
        setGeo() {
            if (navigator.geolocation == null) {
                this.$root.dialog({
                    type: 'warning',
                    text: this.$t('@.post-form.geolocation-alert')
                });
                return;
            }
            navigator.geolocation.getCurrentPosition(pos => {
                this.geo = pos.coords;
                this.$emit('geo-attached', this.geo);
            }, err => {
                this.$root.dialog({
                    type: 'error',
                    title: this.$t('@.post-form.error'),
                    text: err.message
                });
            }, {
                enableHighAccuracy: true
            });
        },
        removeGeo() {
            this.geo = null;
            this.$emit('geo-dettached');
        },
        setVisibility() {
            const w = this.$root.new(visibility_chooser, {
                source: this.$refs.visibilityButton,
                currentVisibility: this.localOnly ? `local-${this.visibility}` : this.visibility
            });
            w.$once('chosen', v => {
                this.applyVisibility(v);
            });
            this.$once('hook:beforeDestroy', () => {
                w.close();
            });
        },
        applyVisibility(v) {
            const m = v.match(/^local-(.+)/);
            if (m) {
                this.localOnly = true;
                this.visibility = m[1];
            }
            else {
                this.localOnly = false;
                this.visibility = v;
            }
        },
        addVisibleUser() {
            this.$root.dialog({
                title: this.$t('@.post-form.enter-username'),
                user: true
            }).then(({ canceled, result: user }) => {
                if (canceled)
                    return;
                this.visibleUsers.push(user);
            });
        },
        removeVisibleUser(user) {
            this.visibleUsers = Object(array["erase"])(user, this.visibleUsers);
        },
        clear() {
            this.text = '';
            this.files = [];
            this.poll = false;
            this.quoteId = null;
            this.$emit('change-attached-files', this.files);
        },
        onKeydown(e) {
            if ((e.which == 10 || e.which == 13) && (e.ctrlKey || e.metaKey) && this.canPost)
                this.post();
        },
        async onPaste(e) {
            for (const { item, i } of Array.from(e.clipboardData.items).map((item, i) => ({ item, i }))) {
                if (item.kind == 'file') {
                    const file = item.getAsFile();
                    const lio = file.name.lastIndexOf('.');
                    const ext = lio >= 0 ? file.name.slice(lio) : '';
                    const formatted = `${Object(format_time_string["formatTimeString"])(new Date(file.lastModified), this.$store.state.settings.pastedFileName).replace(/{{number}}/g, `${i + 1}`)}${ext}`;
                    const name = this.$store.state.settings.pasteDialog
                        ? await this.$root.dialog({
                            title: this.$t('@.post-form.enter-file-name'),
                            input: {
                                default: formatted
                            },
                            allowEmpty: false
                        }).then(({ canceled, result }) => canceled ? false : result)
                        : formatted;
                    if (name)
                        this.upload(file, name);
                }
            }
            const paste = e.clipboardData.getData('text');
            if (!this.renote && !this.quoteId && paste.startsWith(config["url"] + '/notes/')) {
                e.preventDefault();
                this.$root.dialog({
                    type: 'info',
                    text: this.$t('@.post-form.quote-question'),
                    showCancelButton: true
                }).then(({ canceled }) => {
                    if (canceled) {
                        Object(index_esm["default"])(this.$refs.text, paste);
                        return;
                    }
                    this.quoteId = paste.substr(config["url"].length).match(/^\/notes\/(.+?)\/?$/)[1];
                });
            }
        },
        onDragover(e) {
            const isFile = e.dataTransfer.items[0].kind == 'file';
            const isDriveFile = e.dataTransfer.types[0] == 'mk_drive_file';
            if (isFile || isDriveFile) {
                e.preventDefault();
                this.draghover = true;
                e.dataTransfer.dropEffect = e.dataTransfer.effectAllowed == 'all' ? 'copy' : 'move';
            }
        },
        onDragenter(e) {
            this.draghover = true;
        },
        onDragleave(e) {
            this.draghover = false;
        },
        onDrop(e) {
            this.draghover = false;
            // „Éï„Ç°„Ç§„É´„Å†„Å£„Åü„Çâ
            if (e.dataTransfer.files.length > 0) {
                e.preventDefault();
                for (const x of Array.from(e.dataTransfer.files))
                    this.upload(x);
                return;
            }
            //#region „Éâ„É©„Ç§„Éñ„ÅÆ„Éï„Ç°„Ç§„É´
            const driveFile = e.dataTransfer.getData('mk_drive_file');
            if (driveFile != null && driveFile != '') {
                const file = JSON.parse(driveFile);
                this.files.push(file);
                this.$emit('change-attached-files', this.files);
                e.preventDefault();
            }
            //#endregion
        },
        async emoji() {
            const Picker = await __webpack_require__.e(/*! import() */ 23).then(__webpack_require__.bind(null, /*! ../../desktop/views/components/emoji-picker-dialog.vue */ "./src/client/app/desktop/views/components/emoji-picker-dialog.vue")).then(m => m.default);
            const button = this.$refs.emoji;
            const rect = button.getBoundingClientRect();
            const vm = this.$root.new(Picker, {
                x: button.offsetWidth + rect.left + window.pageXOffset,
                y: rect.top + window.pageYOffset
            });
            vm.$once('chosen', emoji => {
                Object(index_esm["default"])(this.$refs.text, emoji);
            });
            this.$once('hook:beforeDestroy', () => {
                vm.close();
            });
        },
        saveDraft() {
            if (this.instant)
                return;
            const data = JSON.parse(localStorage.getItem('drafts') || '{}');
            data[this.draftId] = {
                updatedAt: new Date(),
                data: {
                    text: this.text,
                    files: this.files,
                    poll: this.poll && this.$refs.poll ? this.$refs.poll.get() : undefined
                }
            };
            localStorage.setItem('drafts', JSON.stringify(data));
        },
        deleteDraft() {
            const data = JSON.parse(localStorage.getItem('drafts') || '{}');
            delete data[this.draftId];
            localStorage.setItem('drafts', JSON.stringify(data));
        },
        kao() {
            this.text += get_face();
        },
        post() {
            this.posting = true;
            const viaMobile = opts.mobile && !this.$store.state.settings.disableViaMobile;
            this.$root.api('notes/create', {
                text: this.text == '' ? undefined : this.text,
                fileIds: this.files.length > 0 ? this.files.map(f => f.id) : undefined,
                replyId: this.reply ? this.reply.id : undefined,
                renoteId: this.renote ? this.renote.id : this.quoteId ? this.quoteId : undefined,
                poll: this.poll ? this.$refs.poll.get() : undefined,
                cw: this.useCw ? this.cw || '' : undefined,
                visibility: this.visibility,
                visibleUserIds: this.visibility == 'specified' ? this.visibleUsers.map(u => u.id) : undefined,
                localOnly: this.localOnly,
                geo: this.geo ? {
                    coordinates: [this.geo.longitude, this.geo.latitude],
                    altitude: this.geo.altitude,
                    accuracy: this.geo.accuracy,
                    altitudeAccuracy: this.geo.altitudeAccuracy,
                    heading: isNaN(this.geo.heading) ? null : this.geo.heading,
                    speed: this.geo.speed,
                } : null,
                viaMobile: viaMobile
            }).then(data => {
                this.clear();
                this.deleteDraft();
                this.$emit('posted');
                if (opts.onSuccess)
                    opts.onSuccess(this);
            }).catch(err => {
                if (opts.onSuccess)
                    opts.onFailure(this);
            }).then(() => {
                this.posting = false;
            });
            if (this.text && this.text != '') {
                const hashtags = Object(parse["parse"])(this.text).filter(x => x.node.type === 'hashtag').map(x => x.node.props.hashtag);
                const history = JSON.parse(localStorage.getItem('hashtags') || '[]');
                localStorage.setItem('hashtags', JSON.stringify(Object(array["unique"])(hashtags.concat(history))));
            }
        },
    }
}));

// CONCATENATED MODULE: ./node_modules/ts-loader??ref--5-0!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/vue-svg-inline-loader/dist/index.min.js!./src/client/app/desktop/views/components/post-form.vue?vue&type=script&lang=ts&



/* harmony default export */ var post_formvue_type_script_lang_ts_ = (vue_runtime_esm["default"].extend({
    i18n: Object(i18n["default"])('desktop/views/components/post-form.vue'),
    mixins: [
        post_form({
            onSuccess: self => {
                self.$notify(self.renote
                    ? self.$t('reposted')
                    : self.reply
                        ? self.$t('replied')
                        : self.$t('posted'));
            },
            onFailure: self => {
                self.$notify(self.renote
                    ? self.$t('renote-failed')
                    : self.reply
                        ? self.$t('reply-failed')
                        : self.$t('note-failed'));
            }
        }),
    ],
}));

// CONCATENATED MODULE: ./src/client/app/desktop/views/components/post-form.vue?vue&type=script&lang=ts&
 /* harmony default export */ var components_post_formvue_type_script_lang_ts_ = (post_formvue_type_script_lang_ts_); 
// EXTERNAL MODULE: ./src/client/app/desktop/views/components/post-form.vue?vue&type=style&index=0&id=17f78756&lang=stylus&scoped=true&
var post_formvue_type_style_index_0_id_17f78756_lang_stylus_scoped_true_ = __webpack_require__("./src/client/app/desktop/views/components/post-form.vue?vue&type=style&index=0&id=17f78756&lang=stylus&scoped=true&");

// CONCATENATED MODULE: ./src/client/app/desktop/views/components/post-form.vue






/* normalize component */

var post_form_component = Object(componentNormalizer["default"])(
  components_post_formvue_type_script_lang_ts_,
  render,
  staticRenderFns,
  false,
  null,
  "17f78756",
  null
  
)

/* hot reload */
if (false) { var post_form_api; }
post_form_component.options.__file = "src/client/app/desktop/views/components/post-form.vue"
/* harmony default export */ var components_post_form = __webpack_exports__["default"] = (post_form_component.exports);

/***/ }),

/***/ "./src/client/app/desktop/views/components/post-form.vue?vue&type=style&index=0&id=17f78756&lang=stylus&scoped=true&":
/*!***************************************************************************************************************************!*\
  !*** ./src/client/app/desktop/views/components/post-form.vue?vue&type=style&index=0&id=17f78756&lang=stylus&scoped=true& ***!
  \***************************************************************************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module exports are unknown */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_vue_style_loader_index_js_node_modules_css_loader_dist_cjs_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_1_oneOf_1_2_node_modules_stylus_loader_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_vue_svg_inline_loader_dist_index_min_js_post_form_vue_vue_type_style_index_0_id_17f78756_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../../../node_modules/vue-style-loader!../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src??ref--1-oneOf-1-2!../../../../../../node_modules/stylus-loader!../../../../../../node_modules/vue-loader/lib??vue-loader-options!../../../../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./post-form.vue?vue&type=style&index=0&id=17f78756&lang=stylus&scoped=true& */ "./node_modules/vue-style-loader/index.js!./node_modules/css-loader/dist/cjs.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/stylus-loader/index.js!./node_modules/vue-loader/lib/index.js?!./node_modules/vue-svg-inline-loader/dist/index.min.js!./src/client/app/desktop/views/components/post-form.vue?vue&type=style&index=0&id=17f78756&lang=stylus&scoped=true&");
/* harmony import */ var _node_modules_vue_style_loader_index_js_node_modules_css_loader_dist_cjs_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_1_oneOf_1_2_node_modules_stylus_loader_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_vue_svg_inline_loader_dist_index_min_js_post_form_vue_vue_type_style_index_0_id_17f78756_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_vue_style_loader_index_js_node_modules_css_loader_dist_cjs_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_1_oneOf_1_2_node_modules_stylus_loader_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_vue_svg_inline_loader_dist_index_min_js_post_form_vue_vue_type_style_index_0_id_17f78756_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _node_modules_vue_style_loader_index_js_node_modules_css_loader_dist_cjs_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_1_oneOf_1_2_node_modules_stylus_loader_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_vue_svg_inline_loader_dist_index_min_js_post_form_vue_vue_type_style_index_0_id_17f78756_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _node_modules_vue_style_loader_index_js_node_modules_css_loader_dist_cjs_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_1_oneOf_1_2_node_modules_stylus_loader_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_vue_svg_inline_loader_dist_index_min_js_post_form_vue_vue_type_style_index_0_id_17f78756_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_node_modules_vue_style_loader_index_js_node_modules_css_loader_dist_cjs_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_1_oneOf_1_2_node_modules_stylus_loader_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_vue_svg_inline_loader_dist_index_min_js_post_form_vue_vue_type_style_index_0_id_17f78756_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ })

}]);
//# sourceMappingURL=7.11.37.1.js.map